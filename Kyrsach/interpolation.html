<!DOCTYPE html>

<html>
<head>
    <META  charset="utf-8">
    <link rel="stylesheet" type="text/css" href="styles/main.css">
    <title>Курсова робота</title>
</head>

<body>

<input type='button' class='clear' value='Очистити поля' onClick=location.href="interpolation.html">
<input type='button' class='mpage' value='На головну' onClick=location.href="index.html">
<div class="points" >
<table class="tab">
    <tr> <th colspan="2"> <h3> Будь ласка, введіть точки: </h3> </th> </tr>
    <tr> <th>Введіть X:</th> <th>Введіть Y:</th> </tr>
    <tr><td> x<sub>1</sub>:<input type="number" id="x0" min="0" max="100" step="0.05"> </td> <td> y<sub>1</sub>:<input type="number" id="y0" min="0" max="100" step="0.01"></td> </tr>
    <tr><td> x<sub>2</sub>:<input type="number" id="x1" min="0" max="100" step="0.05"> </td> <td> y<sub>2</sub>:<input type="number" id="y1" min="0" max="100" step="0.01"></td> </tr>
    <tr><td> x<sub>3</sub>:<input type="number" id="x2" min="0" max="100" step="0.05"> </td> <td> y<sub>3</sub>:<input type="number" id="y2" min="0" max="100" step="0.01"></td> </tr>
    <tr><td> x<sub>4</sub>:<input type="number" id="x3" min="0" max="100" step="0.05"> </td> <td> y<sub>4</sub>:<input type="number" id="y3" min="0" max="100" step="0.01"></td> </tr>
    <tr><td> x<sub>5</sub>:<input type="number" id="x4" min="0" max="100" step="0.05"> </td> <td> y<sub>5</sub>:<input type="number" id="y4" min="0" max="100" step="0.01"></td> </tr>
    <tr><td> x<sub>6</sub>:<input type="number" id="x5" min="0" max="100" step="0.05"> </td> <td> y<sub>6</sub>:<input type="number" id="y5" min="0" max="100" step="0.01"></td> </tr>
</table>
    <input type='submit' class='sub' value='Обрахувати' onclick="interpolation()">
</div>

<div class="method1"> <h3 id="h">Вихідні дані за першою формулою</h3>

    <table id="tabl">
        <tr id="t"> <th>X:</th> <td><output  id="x1_1">0</output></td> <td><output  id="x1_2">0</output></td> <td><output  id="x1_3">0</output></td> <td><output  id="x1_4">0</output></td> <td><output  id="x1_5">0</output></td> <td><output  id="x1_6">0</output></td> <td><output  id="x1_7">0</output></td> <td><output  id="x1_8">0</output></td> <td><output  id="x1_9">0</output></td> <td><output  id="x1_10">0</output></td> <td><output  id="x1_11">0</output></td> <td><output  id="x1_12">0</output></td> <td><output  id="x1_13">0</output></td> </tr>
        <tr id="t"> <th>Y:</th> <td><output  id="y1_1">0</output></td> <td><output  id="y1_2">0</output></td> <td><output  id="y1_3">0</output></td> <td><output  id="y1_4">0</output></td> <td><output  id="y1_5">0</output></td> <td><output  id="y1_6">0</output></td> <td><output  id="y1_7">0</output></td> <td><output  id="y1_8">0</output></td> <td><output  id="y1_9">0</output></td> <td><output  id="y1_10">0</output></td> <td><output  id="y1_11">0</output></td> <td><output  id="y1_12">0</output></td> <td><output  id="y1_13">0</output></td></tr>
    </table>

</div>

<div class="method2">

    <h3 id="h">Вихідні дані за другою формулою</h3>

    <table id="tabl">
        <tr id="t"> <th>X:</th> <td><output  id="x2_1">0</output></td> <td><output  id="x2_2">0</output></td> <td><output  id="x2_3">0</output></td> <td><output  id="x2_4">0</output></td> <td><output  id="x2_5">0</output></td> <td><output  id="x2_6">0</output></td> <td><output  id="x2_7">0</output></td> <td><output  id="x2_8">0</output></td> <td><output  id="x2_9">0</output></td> <td><output  id="x2_10">0</output></td> <td><output  id="x2_11">0</output></td> <td><output  id="x2_12">0</output></td> <td><output  id="x2_13">0</output></td> </tr>
        <tr id="t"> <th>Y:</th> <td><output  id="y2_1">0</output></td> <td><output  id="y2_2">0</output></td> <td><output  id="y2_3">0</output></td> <td><output  id="y2_4">0</output></td> <td><output  id="y2_5">0</output></td> <td><output  id="y2_6">0</output></td> <td><output  id="y2_7">0</output></td> <td><output  id="y2_8">0</output></td> <td><output  id="y2_9">0</output></td> <td><output  id="y2_10">0</output></td> <td><output  id="y2_11">0</output></td> <td><output  id="y2_12">0</output></td> <td><output  id="y2_13">0</output></td> </tr>
    </table>
</div>
<div class="graph"></div>
<script>

    function interpolation() {
        var vhx = [];
        vhx[0] = document.getElementById('x0').value;   //отримуємо набір точок x
        vhx[1] = document.getElementById('x1').value;
        vhx[2] = document.getElementById('x2').value;
        vhx[3] = document.getElementById('x3').value;
        vhx[4] = document.getElementById('x4').value;
        vhx[5] = document.getElementById('x5').value;

        var vhy = [];
        vhy[0] = document.getElementById('y0').value;   //отримуємо набір точок y
        vhy[1] = document.getElementById('y1').value;
        vhy[2] = document.getElementById('y2').value;
        vhy[3] = document.getElementById('y3').value;
        vhy[4] = document.getElementById('y4').value;
        vhy[5] = document.getElementById('y5').value;

        for(var t = 0; t<6; t++){
            vhy[t] = Number(vhy[t]);
            vhx[t] = Number(vhx[t]);
        }

        var n = 6;      //допоміжна змінна
        var rizn  = [];  // матриця різниць
        var krok = vhx[1]-vhx[0];   //ширина кроку по х

        for(var  i=0;  i<n;  i++)  //обнуляємо матрицю різниць
        {
            rizn[i]=[];
            for(var j=0; j<n-2; j++)
            {
                rizn[i][j]= 0;
            }
        }


        for( i=0; i<n-1; i++) //обчислюємо різниці першого порядку
        {
             rizn[i][0]= vhy[i+1] - vhy[i];
        }

        for( j=1; j<n-3;  j++)   //знаходимо значення різниць ще двох порядків
        {
            for( i=0; i<=n-j-2; i++)  //кількість різниць з кожним порядком зменшуватиметься на 1
            {
                rizn[i][j]=rizn[i+1][j-1]-rizn[i][j-1];
                if(rizn[4][2]) break;
            }
        }

        ////перша формула Гауса - інтерполяція вперед

        var x = vhx[0];  //x-координата точки, по якій інтерполюють
        var tx = [];   //для зберігання координат точок за першою формулою
        var ty = [];


        for(var ix=0; ix<(n*2)+1; ix++)
        {
            if(ix!=0)
            {
                x = x + 0.01;
            }
            var k=0;
            do {
            k++;   //знаходимо індекс елемента зліва від х
            var p = (x - vhx[k]) / krok;
            var y1 = p * rizn[k][0];
            var y2 = p * (p - 1) * rizn[k - 1][1] / 2;
            var y3 = p * (p - 1) * (p + 1) * rizn[k - 1][2] / 6;
            var y4 = p * (p - 1) * (p + 2) * (p - 2) * rizn[k - 1][3] / 24;
            var yp = vhy[k] + y1 + y2 + y3 + y4;

            }while(vhx[k]>x);
            tx[ix] = x.toFixed(2);
            ty[ix] = yp.toFixed(2);
        }

        x1_1.value=tx[0];
        x1_2.value=tx[1];
        x1_3.value=tx[2];
        x1_4.value=tx[3];
        x1_5.value=tx[4];
        x1_6.value=tx[5];
        x1_7.value=tx[6];
        x1_8.value=tx[7];
        x1_9.value=tx[8];
        x1_10.value=tx[9];
        x1_11.value=tx[10];
        x1_12.value=tx[11];
        x1_13.value=tx[12];

        y1_1.value=ty[0];
        y1_2.value=ty[1];
        y1_3.value=ty[2];
        y1_4.value=ty[3];
        y1_5.value=ty[4];
        y1_6.value=ty[5];
        y1_7.value=ty[6];
        y1_8.value=ty[7];
        y1_9.value=ty[8];
        y1_10.value=ty[9];
        y1_11.value=ty[10];
        y1_12.value=ty[11];
        y1_13.value=ty[12];




        ////друга формула Гауса - інтерполяція назад

        x=vhx[5];
        var tx1 = [];
        var ty1 = [];

        for(ix=0; ix<(6*2)+1; ix++)
        {
            if(ix!=0)
            {
                x=x-0.01;
            }

              i = 0;
            do{
                i++;   //знаходимо індекс елемента справа від х
            } while(vhx[i]<x);

            p = (x-vhx[i])/krok;
            y1 = p*rizn[i-1][0];
            y2 = p*(p-1)*rizn[i-1][1]/2;
            y3 = p*(p-1)*(p+1)*rizn[i-1][2]/6;
            y4 = p*(p-1)*(p+1)*(p-2)*rizn[i-1][3]/24;
            yp = vhy[i]+y1+y2+y3+y4;

            tx1[ix] = x.toFixed(2);
            ty1[ix] = yp.toFixed(2);
        }

        x2_1.value=tx1[0];
        x2_2.value=tx1[1];
        x2_3.value=tx1[2];
        x2_4.value=tx1[3];
        x2_5.value=tx1[4];
        x2_6.value=tx1[5];
        x2_7.value=tx1[6];
        x2_8.value=tx1[7];
        x2_9.value=tx1[8];
        x2_10.value=tx1[9];
        x2_11.value=tx1[10];
        x2_12.value=tx1[11];
        x2_13.value=tx1[12];

        y2_1.value=ty1[0];
        y2_2.value=ty1[1];
        y2_3.value=ty1[2];
        y2_4.value=ty1[3];
        y2_5.value=ty1[4];
        y2_6.value=ty1[5];
        y2_7.value=ty1[6];
        y2_8.value=ty1[7];
        y2_9.value=ty1[8];
        y2_10.value=ty1[9];
        y2_11.value=ty1[10];
        y2_12.value=ty1[11];
        y2_13.value=ty1[12];
    }

   </script>
</body>
</html>